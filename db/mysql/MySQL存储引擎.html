<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.46" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/images/favicon.ico"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>🎸 MySQL存储引擎 | liuxianzhishou</title><meta name="description" content="一步一罪化，一步一莲华">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.7120bfc5.css">
    <link rel="modulepreload" href="/assets/app.5aebcaaa.js"><link rel="modulepreload" href="/assets/MySQL存储引擎.html.a2331f6b.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/MySQL存储引擎.html.6a900638.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><!----><!----><span class="site-name hide-in-pad">liuxianzhishou</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="首页"><!---->首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/proj/%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90.html" class="nav-link" aria-label="项目文档"><!---->项目文档<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><!---->Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/java/basic/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.html" class="nav-link" aria-label="Java 基础"><!---->Java 基础<!----></a></li><li class="dropdown-item"><a href="/java/collection/ArrayList.html" class="nav-link" aria-label="Java 集合"><!---->Java 集合<!----></a></li><li class="dropdown-item"><a href="/java/concurrency/synchronized.html" class="nav-link" aria-label="Java 并发 &amp; 多线程"><!---->Java 并发 &amp; 多线程<!----></a></li><li class="dropdown-item"><a href="/java/jvm/%E4%B8%80%E3%80%81%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.html" class="nav-link" aria-label="JVM"><!---->JVM<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title"><!---->数据库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/db/mysql/MySQL%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html" class="nav-link" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="dropdown-item"><a href="/db/redis/sds.html" class="nav-link" aria-label="Redis"><!---->Redis<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="框架中间件"><span class="title"><!---->框架中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/frame/spring/Spring.html" class="nav-link" aria-label="spring"><!---->spring<!----></a></li><li class="dropdown-item"><a href="/frame/tomcat/tom.html" class="nav-link" aria-label="Tomcat"><!---->Tomcat<!----></a></li><li class="dropdown-item"><a href="/frame/mybatis/mybatis.html" class="nav-link" aria-label="MyBatis"><!---->MyBatis<!----></a></li><li class="dropdown-item"><a href="/frame/rpc/rpc.html" class="nav-link" aria-label="RPC"><!---->RPC<!----></a></li><li class="dropdown-item"><a href="/middleware/zookeeper/zo1.html" class="nav-link" aria-label="zookeeper"><!---->zookeeper<!----></a></li><li class="dropdown-item"><a href="/middleware/mq/rabbit.html" class="nav-link" aria-label="消息队列"><!---->消息队列<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="设计模式"><span class="title"><!---->设计模式</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/design/summary/%E6%80%BB%E8%A7%88.html" class="nav-link" aria-label="总览"><!---->总览<!----></a></li><li class="dropdown-item"><a href="/design/create/%E5%8D%95%E4%BE%8B.html" class="nav-link" aria-label="创建型"><!---->创建型<!----></a></li><li class="dropdown-item"><a href="/design/struct/%E9%80%82%E9%85%8D%E5%99%A8.html" class="nav-link" aria-label="结构型"><!---->结构型<!----></a></li><li class="dropdown-item"><a href="/design/behavior/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95.html" class="nav-link" aria-label="行为型"><!---->行为型<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="操作系统"><span class="title"><!---->操作系统</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/os/system/sys.html" class="nav-link" aria-label="操作系统"><!---->操作系统<!----></a></li><li class="dropdown-item"><a href="/os/linux/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" class="nav-link" aria-label="Linux"><!---->Linux<!----></a></li><li class="dropdown-item"><a href="/os/docker/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" class="nav-link" aria-label="Docker"><!---->Docker<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="计算机网络"><span class="title"><!---->计算机网络</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/network/summary/basic.html" class="nav-link" aria-label="总览"><!---->总览<!----></a></li><li class="dropdown-item"><a href="/network/http/http.html" class="nav-link" aria-label="应用层"><!---->应用层<!----></a></li><li class="dropdown-item"><a href="/network/tcp/tcp.html" class="nav-link" aria-label="传输层"><!---->传输层<!----></a></li><li class="dropdown-item"><a href="/network/ip/ip.html" class="nav-link" aria-label="网络层"><!---->网络层<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/distributed/%E5%88%86%E5%B8%83%E5%BC%8F.html" class="nav-link" aria-label="分布式"><!---->分布式<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="算法"><span class="title"><!---->算法</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/algorithm/array/307.html" class="nav-link" aria-label="数组"><!---->数组<!----></a></li><li class="dropdown-item"><a href="/algorithm/list/460.html" class="nav-link" aria-label="链表"><!---->链表<!----></a></li><li class="dropdown-item"><a href="/algorithm/hash/532.html" class="nav-link" aria-label="哈希表"><!---->哈希表<!----></a></li><li class="dropdown-item"><a href="/algorithm/stack/218.html" class="nav-link" aria-label="栈 &amp; 队列"><!---->栈 &amp; 队列<!----></a></li><li class="dropdown-item"><a href="/algorithm/string/28.html" class="nav-link" aria-label="字符串"><!---->字符串<!----></a></li><li class="dropdown-item"><a href="/algorithm/tree/144%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.html" class="nav-link" aria-label="树"><!---->树<!----></a></li><li class="dropdown-item"><a href="/algorithm/backtrace/37%E8%A7%A3%E6%95%B0%E7%8B%AC.html" class="nav-link" aria-label="回溯"><!---->回溯<!----></a></li><li class="dropdown-item"><a href="/algorithm/dp/300%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97.html" class="nav-link" aria-label="动态规划"><!---->动态规划<!----></a></li><li class="dropdown-item"><a href="/algorithm/sort/327.html" class="nav-link" aria-label="排序"><!---->排序<!----></a></li><li class="dropdown-item"><a href="/algorithm/graph/126.html" class="nav-link" aria-label="图"><!---->图<!----></a></li><li class="dropdown-item"><a href="/algorithm/extra/685.html" class="nav-link" aria-label="补充"><!---->补充<!----></a></li><li class="dropdown-item"><a href="/algorithm/thread/1114.html" class="nav-link" aria-label="多线程"><!---->多线程<!----></a></li><li class="dropdown-item"><a href="/algorithm/offer/03.html" class="nav-link" aria-label="剑指 Offer"><!---->剑指 Offer<!----></a></li><li class="dropdown-item"><a href="/algorithm/comp/01.html" class="nav-link" aria-label="竞赛"><!---->竞赛<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><!----></div><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/db/mysql/MySQL%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html" class="nav-link sidebar-link sidebar-page" aria-label="🎷 MySQL基本知识"><!---->🎷 MySQL基本知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="🎸 MySQL存储引擎"><!---->🎸 MySQL存储引擎<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_1-存储引擎" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. 存储引擎"><!---->1. 存储引擎<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#mysql-存储引擎种类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MySQL 存储引擎种类"><!---->MySQL 存储引擎种类<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_2-innodb-架构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. InnoDB 架构"><!---->2. InnoDB 架构<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_1-adaptive-hash-index-自适应-hash-索引" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1) Adaptive Hash Index [自适应 Hash 索引]"><!---->1) Adaptive Hash Index [自适应 Hash 索引]<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_2-buffer-pool-缓存池" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2) Buffer Pool [缓存池]"><!---->2) Buffer Pool [缓存池]<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_3-change-buffer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3) Change Buffer"><!---->3) Change Buffer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_4-log-buffer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4) Log Buffer"><!---->4) Log Buffer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_5-operating-system-cache" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5) Operating System Cache"><!---->5) Operating System Cache<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_6-表空间" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6) 表空间"><!---->6) 表空间<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_7-doublewrite-buffer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7) Doublewrite Buffer"><!---->7) Doublewrite Buffer<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_3-innodb-逻辑结构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. InnoDB 逻辑结构"><!---->3. InnoDB 逻辑结构<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_1-表空间-tablespace" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1) 表空间/Tablespace"><!---->1) 表空间/Tablespace<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_2-区-簇-extent" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2) 区/簇/Extent"><!---->2) 区/簇/Extent<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_3-段-segment" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3) 段/Segment"><!---->3) 段/Segment<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_4-页-page" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4) 页/Page"><!---->4) 页/Page<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_4-innodb-行格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. InnoDB 行格式"><!---->4. InnoDB 行格式<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/db/mysql/%E7%B4%A2%E5%BC%95.html" class="nav-link sidebar-link sidebar-page" aria-label="🎺 索引"><!---->🎺 索引<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/db/mysql/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" class="nav-link sidebar-link sidebar-page" aria-label="🪕 性能优化"><!---->🪕 性能优化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/db/mysql/InnoDB%E4%BA%8B%E5%8A%A1.html" class="nav-link sidebar-link sidebar-page" aria-label="🎹 InnoDB事务"><!---->🎹 InnoDB事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/db/mysql/%E9%94%81.html" class="nav-link sidebar-link sidebar-page" aria-label="🥁 锁"><!---->🥁 锁<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/db/mysql/MySQL%E9%AB%98%E6%80%A7%E8%83%BD.html" class="nav-link sidebar-link sidebar-page" aria-label="🎻 MySQL高性能"><!---->🎻 MySQL高性能<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/db/mysql/sql.html" class="nav-link sidebar-link sidebar-page" aria-label="🔔 SQL 语句"><!---->🔔 SQL 语句<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/db/mysql/SQL%E8%AF%AD%E5%8F%A5.html" class="nav-link sidebar-link sidebar-page" aria-label="📯 SQL 语句 &amp; 练习"><!---->📯 SQL 语句 &amp; 练习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->🎸 MySQL存储引擎</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">吞佛童子</span></span><span property="author" content="吞佛童子"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年6月9日</span><meta property="datePublished" content="2022-06-09T11:12:17.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category7" role>db</li><meta property="articleSection" content="db"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag4" role>mysql</li></ul><meta property="keywords" content="mysql"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 7 分钟</span><meta property="timeRequired" content="PT7M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_1-存储引擎" class="router-link-active router-link-exact-active toc-link level2">1. 存储引擎</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#mysql-存储引擎种类" class="router-link-active router-link-exact-active toc-link level3">MySQL 存储引擎种类</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_2-innodb-架构" class="router-link-active router-link-exact-active toc-link level2">2. InnoDB 架构</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_1-adaptive-hash-index-自适应-hash-索引" class="router-link-active router-link-exact-active toc-link level3">1) Adaptive Hash Index [自适应 Hash 索引]</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_2-buffer-pool-缓存池" class="router-link-active router-link-exact-active toc-link level3">2) Buffer Pool [缓存池]</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_3-change-buffer" class="router-link-active router-link-exact-active toc-link level3">3) Change Buffer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_4-log-buffer" class="router-link-active router-link-exact-active toc-link level3">4) Log Buffer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_5-operating-system-cache" class="router-link-active router-link-exact-active toc-link level3">5) Operating System Cache</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_6-表空间" class="router-link-active router-link-exact-active toc-link level3">6) 表空间</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_7-doublewrite-buffer" class="router-link-active router-link-exact-active toc-link level3">7) Doublewrite Buffer</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_3-innodb-逻辑结构" class="router-link-active router-link-exact-active toc-link level2">3. InnoDB 逻辑结构</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_1-表空间-tablespace" class="router-link-active router-link-exact-active toc-link level3">1) 表空间/Tablespace</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_2-区-簇-extent" class="router-link-active router-link-exact-active toc-link level3">2) 区/簇/Extent</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_3-段-segment" class="router-link-active router-link-exact-active toc-link level3">3) 段/Segment</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_4-页-page" class="router-link-active router-link-exact-active toc-link level3">4) 页/Page</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/db/mysql/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html#_4-innodb-行格式" class="router-link-active router-link-exact-active toc-link level2">4. InnoDB 行格式</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="mysql存储引擎" tabindex="-1"><a class="header-anchor" href="#mysql存储引擎" aria-hidden="true">#</a> 🎸 MySQL存储引擎</h1><h2 id="_1-存储引擎" tabindex="-1"><a class="header-anchor" href="#_1-存储引擎" aria-hidden="true">#</a> 1. 存储引擎</h2><h3 id="mysql-存储引擎种类" tabindex="-1"><a class="header-anchor" href="#mysql-存储引擎种类" aria-hidden="true">#</a> MySQL 存储引擎种类</h3><blockquote><p>查看 当前 MySQL 版本</p></blockquote><p><img src="data:image/png;base64,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" alt="img_6.png"></p><blockquote><p>查看 有哪些存储引擎</p></blockquote><p><img src="/assets/img_5.64267da1.png" alt="img_5.png"></p><h4 id="常见存储引擎分析-结合官方解释" tabindex="-1"><a class="header-anchor" href="#常见存储引擎分析-结合官方解释" aria-hidden="true">#</a> 常见存储引擎分析 [结合官方解释]</h4><table><thead><tr><th><strong>存储引擎</strong></th><th><strong>InnoDB</strong></th><th><strong>MYISAM</strong></th><th><strong>MEMORY</strong></th></tr></thead><tbody><tr><td>存储位置</td><td>磁盘文件</td><td>磁盘文件</td><td>内存</td></tr><tr><td>支持事务</td><td>😃</td><td>🥶</td><td>🥶</td></tr><tr><td>支持崩溃异常后的安全恢复</td><td>😃</td><td>🥶</td><td>🥶</td></tr><tr><td>锁级别</td><td>行级</td><td>表级</td><td>-</td></tr><tr><td>支持锁级别外键</td><td>😃</td><td>🥶</td><td>🥶</td></tr><tr><td>索引数据结构</td><td>B+ &amp; Hash</td><td>B+</td><td>B+ &amp; Hash</td></tr><tr><td>B+ 树区别</td><td>叶子节点存放实际值</td><td>叶子节点存放数据磁盘地址，根据磁盘地址去索引文件中取出实际值</td><td>-</td></tr><tr><td>索引文件后缀</td><td>.myi</td><td>.myd</td><td>-</td></tr><tr><td>是否为默认存储引擎</td><td>😃</td><td>🥶</td><td>🥶</td></tr></tbody></table><blockquote><p>MYISAM 所有索引存储格式：</p><p>可以看出，所有的索引，数据项均为 物理地址，再通过物理地址找到实际各项数据值</p></blockquote><p><img src="/assets/img.a6a0f1f3.png" alt="img.png"></p><hr><h2 id="_2-innodb-架构" tabindex="-1"><a class="header-anchor" href="#_2-innodb-架构" aria-hidden="true">#</a> 2. InnoDB 架构</h2><blockquote><p>InnoDB 架构</p></blockquote><p><img src="/assets/img_7.bd883451.png" alt="img_7.png"></p><h3 id="_1-adaptive-hash-index-自适应-hash-索引" tabindex="-1"><a class="header-anchor" href="#_1-adaptive-hash-index-自适应-hash-索引" aria-hidden="true">#</a> 1) Adaptive Hash Index [自适应 Hash 索引]</h3><ul><li><p>频繁被访问的数据， MySQL 会自动评估使用自适应索引是否值得，</p></li><li><p>如果观察到建立哈希索引可以提升速度，则建立</p></li></ul><h3 id="_2-buffer-pool-缓存池" tabindex="-1"><a class="header-anchor" href="#_2-buffer-pool-缓存池" aria-hidden="true">#</a> 2) Buffer Pool [缓存池]</h3><ul><li><code>Buffer Pool</code> 是一个以<strong>页</strong>为基本单位的链表</li><li>作用 <ul><li>起到缓存作用，提高查询速度，减少磁盘访问次数</li></ul></li><li>存放哪些数据 <ul><li>基于 <mark>LRU</mark> 淘汰算法管理数据</li><li>将缓冲池分为两部分： <ul><li>老年代 <ul><li>进入 <code>Buffer Pool</code> 的数据，首先进入老年代</li></ul></li><li>新生代 <ul><li>老年代数据被访问，才会升入新生代 --&gt; 防止了<strong>预读失效</strong>[OS 内核会把相邻的页也加载进来，这些页如果未被使用]的页被访问</li><li>老年代停留时间超过配置阈值，才可以升入新生代 --&gt; 解决<strong>缓冲池污染</strong>[批量扫描大量数据，将 <code>Buffer Pool</code> 中所有页均被替换出去，导致热数据被换出，性能下降]</li></ul></li></ul></li></ul></li></ul><h3 id="_3-change-buffer" tabindex="-1"><a class="header-anchor" href="#_3-change-buffer" aria-hidden="true">#</a> 3) Change Buffer</h3><ul><li>作用对象： <ul><li>二级索引[ = 辅助索引 = 除了主键索引以外的所有索引]</li><li>主键索引需要保证唯一性，每次 DML 操作均需要加载并判断是否违反唯一性，例如更新为某个新值时，需要判断该值是否已经存在</li></ul></li><li>作用： <ul><li>当需要<strong>更新</strong>一个数据页时，如果数据页在内存中就直接更新</li><li>若数据页还不在内存中，在不影响数据一致性的前提下，InnoDB 会将这些更新操作缓存在 <code>change buffer</code> 中，不需要特意从磁盘中读入这个数据页</li><li>在下次查询需要访问这个数据页的时候，将数据页读入内存，然后执行 <code>change buffer</code> 中之前缓存的更新操作</li></ul></li><li>发生时刻： <ul><li>DML ： 插入 | 更新 | 删除</li></ul></li><li><code>merge</code>： <ul><li>将 <code>change buffer</code> 中的操作应用到原数据页，得到最新结果</li><li>发生时刻： <ul><li>访问到相关数据页时会触发 merge</li><li>系统后台线程定期 merge</li><li>数据库正常关闭的过程中，也会执行 merge 操作</li></ul></li></ul></li><li>优点： <ul><li>将更新操作先记录在 change buffer，减少读磁盘的次数，提高语句的执行速度</li><li>数据读入内存是需要占用 buffer pool 空间，此操作能够避免占用内存，提高内存利用率</li></ul></li><li>适用场景： <ul><li>对于<strong>写多读少</strong>的业务来说，页面在写完以后马上被访问到的概率比较小，此时 change buffer的使用效果最好</li><li>这种业务模型常见的就是账单类、日志类的系统</li><li>若一个操作写入之后马上会做查询，此时写入 change buffer，然后立即读数据页，立即触发 merge，此时读磁盘的次数并不会减少，而且还增加了 buffer pool 的维护代价</li></ul></li></ul><blockquote><p>唯一索引 VS 普通索引 在 Change Buffer 中的角色</p></blockquote><ul><li>唯一索引： <ul><li>所有的更新操作都要先判断这个操作是否违反唯一性约束</li><li>要判断表中是否存在这个数据，而这必须要将数据页读入内存才能判断</li><li>那么此时都已经读入到内存了，直接更新内存会更快，就没必要使用<code> change buffer</code>了</li><li>唯一索引的更新就不能使用 <code>change buffer</code>，也只有<strong>普通索引</strong>可以使用</li></ul></li></ul><blockquote><p>查看 Change Buffer 占比</p></blockquote><p><img src="data:image/png;base64,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" alt="img_8.png"></p><h3 id="_4-log-buffer" tabindex="-1"><a class="header-anchor" href="#_4-log-buffer" aria-hidden="true">#</a> 4) Log Buffer</h3><ul><li>记录要被刷到磁盘里的日志文件数据</li></ul><h3 id="_5-operating-system-cache" tabindex="-1"><a class="header-anchor" href="#_5-operating-system-cache" aria-hidden="true">#</a> 5) Operating System Cache</h3><ul><li>操作系统的缓存</li></ul><h3 id="_6-表空间" tabindex="-1"><a class="header-anchor" href="#_6-表空间" aria-hidden="true">#</a> 6) 表空间</h3><ul><li><p>The System Tablespace</p></li><li><p>File-Per-Table Tablespace</p></li><li><p>General Tablespace</p></li><li><p>Undo Tablespace</p></li><li><p>Temporary Tablespace</p></li></ul><h3 id="_7-doublewrite-buffer" tabindex="-1"><a class="header-anchor" href="#_7-doublewrite-buffer" aria-hidden="true">#</a> 7) Doublewrite Buffer</h3><ul><li>保证数据页的可靠性</li><li>MySQL 在刷数据到磁盘之前，要先把数据写到 Doublewrite Buffer，</li><li>写完后，再开始写磁盘</li><li>Doublewrite Buffer 可以理解为是一个备份（recovery），</li><li>万一真的发生 crash，就可以利用 Doublewrite Buffer 来修复磁盘里的数据。</li></ul><hr><h2 id="_3-innodb-逻辑结构" tabindex="-1"><a class="header-anchor" href="#_3-innodb-逻辑结构" aria-hidden="true">#</a> 3. InnoDB 逻辑结构</h2><h3 id="_1-表空间-tablespace" tabindex="-1"><a class="header-anchor" href="#_1-表空间-tablespace" aria-hidden="true">#</a> 1) 表空间/Tablespace</h3><ol><li>表空间是InnoDB存储引擎中逻辑结构的最高层，所有数据逻辑上都存储在表空间中</li><li>类型：</li></ol><ul><li><code>The System Tablespace</code><ul><li><code>DoubleWrite Buffer</code></li><li><code>Change Buffer</code></li><li><code>InnoDB</code> 相关所有对象的元数据等</li></ul></li><li><code>File-Per-Table Tablespace</code><ul><li>每张表对应一个独立的表空间，每个表都是一个 <code>.ibd</code> 文件</li><li>5.6.6之后此配置默认开启</li></ul></li><li><code>General Tablespace</code><ul><li>通过<code>create tablespace 表空间名</code> 手动创建的表空间</li></ul></li><li><code>Temporary Tablespace</code><ul><li>存储临时表以及临时表变化对应的回滚段</li></ul></li></ul><h3 id="_2-区-簇-extent" tabindex="-1"><a class="header-anchor" href="#_2-区-簇-extent" aria-hidden="true">#</a> 2) 区/簇/Extent</h3><ol><li>一个区/簇是物理上连续分配的一段空间，Extent 上有多个连续的页，以存储同一逻辑单元的数据，例：索引段， 数据段</li><li>一个 Extent 默认 <strong>1MB</strong>，含有 <strong>64</strong> 页 <strong>16KB</strong> 的页</li></ol><ul><li><img src="data:image/png;base64,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" alt="img_11.png"></li></ul><div class="md-enhance-mermaid loading"><svg xmlns="http://www.w3.org/2000/svg" class="icon loading-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="loading icon"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="0s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="0s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.333s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.333s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.667s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.667s"></animate></circle></svg></div><h3 id="_3-段-segment" tabindex="-1"><a class="header-anchor" href="#_3-段-segment" aria-hidden="true">#</a> 3) 段/Segment</h3><ol><li>逻辑上有关联的 区/簇 归属为一个段</li><li>InnoDB 中把这些记录具有相关性区的存储空间状态的管理信息称为<strong>段实体</strong>，<strong>段实体所管理的区的总和</strong>称为<strong>段</strong></li></ol><h3 id="_4-页-page" tabindex="-1"><a class="header-anchor" href="#_4-页-page" aria-hidden="true">#</a> 4) 页/Page</h3><ol><li>InnoDB 中 IO 操作的最小单位</li><li>组成部分： <ul><li>页头 <ul><li>指明当前页号、类型和所属表空间</li></ul></li><li>页身 <ul><li>存储数据的主要部分</li><li>2 部分： <ul><li>表空间首页头信息区 <ul><li>表、段、区簇相关信息</li></ul></li><li>业务数据区</li></ul></li></ul></li></ul></li></ol><ul><li>页尾 <ul><li>主要用于数据的校验</li></ul></li></ul><ol start="3"><li><strong>表空间</strong>中的 <strong>0</strong> 号文件的 <strong>0</strong> 号 page 页中存储表空间信息以及当前表空间所拥有的段链表的指针</li></ol><hr><h2 id="_4-innodb-行格式" tabindex="-1"><a class="header-anchor" href="#_4-innodb-行格式" aria-hidden="true">#</a> 4. InnoDB 行格式</h2><blockquote><p>默认行格式为 dynamic 格式，是单向链表结构</p></blockquote><div class="md-enhance-mermaid loading"><svg xmlns="http://www.w3.org/2000/svg" class="icon loading-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="loading icon"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="0s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="0s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.333s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.333s"></animate></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" strokewidth="2"><animate attributename="r" repeatcount="indefinite" dur="1s" values="0;40" keytimes="0;1" keysplines="0 0.2 0.8 1" calcmode="spline" begin="-0.667s"></animate><animate attributename="opacity" repeatcount="indefinite" dur="1s" values="1;0" keytimes="0;1" keysplines="0.2 0 0.8 1" calcmode="spline" begin="-0.667s"></animate></circle></svg></div><blockquote><p>自增 ID 用完后？</p></blockquote><ul><li>若设置了主键，则会报错主键冲突</li><li>若未设置主键，采用默认自增主键 row_id，则新数据会覆盖老数据</li></ul></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/10/10 下午8:43:48</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: liuxianzhishou@qq.com">liuxianzhishou</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/db/mysql/MySQL%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html" class="nav-link prev" aria-label="🎷 MySQL基本知识"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->🎷 MySQL基本知识</div></a><a href="/db/mysql/%E7%B4%A2%E5%BC%95.html" class="nav-link next" aria-label="🎺 索引"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">🎺 索引<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.5aebcaaa.js" defer></script>
  </body>
</html>
