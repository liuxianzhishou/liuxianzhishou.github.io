import{_ as h}from"./plugin-vue_export-helper.21dcd24c.js";import{r as s,o as p,c as u,b as t,w as n,a as e,d as a,e as o}from"./app.5aebcaaa.js";var b="/assets/img.477d4e02.png";const k={},g=e("h1",{id:"websocket",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#websocket","aria-hidden":"true"},"#"),a(" \u{1F58B}\uFE0F websocket")],-1),m=e("h2",{id:"_1-\u8FDE\u63A5\u8FC7\u7A0B",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-\u8FDE\u63A5\u8FC7\u7A0B","aria-hidden":"true"},"#"),a(" 1. \u8FDE\u63A5\u8FC7\u7A0B")],-1),_=o('<h3 id="_1-tcp-3-\u6B21\u63E1\u624B" tabindex="-1"><a class="header-anchor" href="#_1-tcp-3-\u6B21\u63E1\u624B" aria-hidden="true">#</a> 1) TCP 3 \u6B21\u63E1\u624B</h3><h3 id="_2-websocket-2-\u6B21\u63E1\u624B" tabindex="-1"><a class="header-anchor" href="#_2-websocket-2-\u6B21\u63E1\u624B" aria-hidden="true">#</a> 2) websocket 2 \u6B21\u63E1\u624B</h3><ul><li>Client \u53D1\u9001 request \u901A\u77E5 <strong>\u5347\u7EA7\u534F\u8BAE</strong>\uFF0C<strong>\u5347\u7EA7\u4E3A websocket</strong>\uFF0C\u540C\u65F6\u643A\u5E26 <strong>\u968F\u673A\u751F\u6210\u7684 base64 \u7801</strong></li><li>Server \u56DE\u590D response\uFF0C\u8868\u793A\u652F\u6301 <strong>\u5347\u7EA7\u534F\u8BAE</strong>\uFF0C\u540C\u65F6\u643A\u5E26 <strong>\u57FA\u4E8E Client \u53D1\u9001\u7684 base64 \u7801\uFF0C\u901A\u8FC7\u67D0\u79CD\u516C\u5F00\u7684\u7B97\u6CD5\u751F\u6210\u53E6\u4E00\u6BB5\u5B57\u7B26\u4E32</strong></li><li>Client \u6839\u636E response \u7684 base64 \u7801\u548C\u81EA\u5DF1\u901A\u8FC7\u67D0\u79CD\u516C\u5F00\u7684\u7B97\u6CD5\u751F\u6210\u7684\u5B57\u7B26\u4E32\u8FDB\u884C <strong>\u5339\u914D</strong>\uFF0C\u5339\u914D\u6210\u529F\uFF0C\u5219\u8BF4\u660E websocket \u5EFA\u7ACB\u6210\u529F</li></ul>',3),A=e("div",{class:"language-http ext-http line-numbers-mode"},[e("pre",{class:"language-http"},[e("code",null,[e("span",{class:"token header"},[e("span",{class:"token header-name keyword"},"Connection"),e("span",{class:"token punctuation"},":"),a(),e("span",{class:"token header-value"},"Upgrade // \u5347\u7EA7\u534F\u8BAE")]),a(`
`),e("span",{class:"token header"},[e("span",{class:"token header-name keyword"},"Upgrade"),e("span",{class:"token punctuation"},":"),a(),e("span",{class:"token header-value"},"websocket // \u5347\u7EA7\u4E3A websocket")]),a(`
`),e("span",{class:"token header"},[e("span",{class:"token header-name keyword"},"Sec-WebSocket-Key"),e("span",{class:"token punctuation"},":"),a(),e("span",{class:"token header-value"},"T2a6wZlAwhgQNqruZ2YUyg==\\r\\n // \u968F\u673A\u751F\u6210\u7684 base64 \u7801")]),a(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),w=e("div",{class:"language-http ext-http line-numbers-mode"},[e("pre",{class:"language-http"},[e("code",null,[e("span",{class:"token response-status"},[e("span",{class:"token http-version property"},"HTTP/1.1"),a(),e("span",{class:"token status-code number"},"101"),a(),e("span",{class:"token reason-phrase string"},"Switching Protocols\\r\\n")]),a(`
`),e("span",{class:"token header"},[e("span",{class:"token header-name keyword"},"Sec-WebSocket-Accept"),e("span",{class:"token punctuation"},":"),a(),e("span",{class:"token header-value"},"iBJKv/ALIW2DobfoA4dmr3JHBCY=\\r\\n // \u6839\u636E request \u7684 base64 \u7801\u6839\u636E \u67D0\u79CD\u516C\u5F00\u7B97\u6CD5 \u751F\u6210\u53E6\u4E00\u7AEF\u5B57\u7B26\u4E32")]),a(`
`),e("span",{class:"token header"},[e("span",{class:"token header-name keyword"},"Upgrade"),e("span",{class:"token punctuation"},":"),a(),e("span",{class:"token header-value"},"websocket\\r\\n")]),a(`
`),e("span",{class:"token header"},[e("span",{class:"token header-name keyword"},"Connection"),e("span",{class:"token punctuation"},":"),a(),e("span",{class:"token header-value"},"Upgrade\\r\\n")]),a(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),v=o('<h3 id="_3-\u4F20\u8F93-websocket-\u683C\u5F0F-message" tabindex="-1"><a class="header-anchor" href="#_3-\u4F20\u8F93-websocket-\u683C\u5F0F-message" aria-hidden="true">#</a> 3) \u4F20\u8F93 websocket \u683C\u5F0F message</h3><hr><h2 id="_2-websocket-\u6D88\u606F\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-websocket-\u6D88\u606F\u683C\u5F0F" aria-hidden="true">#</a> 2. websocket \u6D88\u606F\u683C\u5F0F</h2><p><img src="'+b+'" alt="img.png"></p><h3 id="opcode-4-bit" tabindex="-1"><a class="header-anchor" href="#opcode-4-bit" aria-hidden="true">#</a> opcode 4 bit</h3><ul><li>\u8868\u793A\u6570\u636E\u5E27\u7684 \u7C7B\u578B <ul><li><code>1</code><ul><li>text \u7C7B\u578B\uFF0C String</li></ul></li><li><code>2</code><ul><li>\u4E8C\u8FDB\u5236\u7C7B\u578B\uFF0Cbyte[]</li></ul></li><li><code>8</code><ul><li>\u5173\u95ED\u8FDE\u63A5</li></ul></li></ul></li></ul><h3 id="payload-\u957F\u5EA6-7-16-64-bit" tabindex="-1"><a class="header-anchor" href="#payload-\u957F\u5EA6-7-16-64-bit" aria-hidden="true">#</a> payload \u957F\u5EA6 7 | 16 | 64 bit</h3><ul><li>\u771F\u6B63\u4F20\u8F93\u7684\u6570\u636E\u957F\u5EA6\uFF0C\u5355\u4F4D\u4E3A \u5B57\u8282</li><li>\u7531\u4E8E\u6709\u591A\u79CD payload \u957F\u5EA6\uFF0C\u56E0\u6B64 \u4F18\u5148\u8BFB\u53D6 <code>7</code> bit\uFF0C <ul><li>\u82E5\u5728 [0, 125] \u533A\u95F4\uFF0C\u5219\u4E3A\u5168\u90E8\u957F\u5EA6\uFF1B</li><li>\u82E5\u4E3A 126\uFF0C\u9700\u8981\u8BFB\u53D6\u540E <code>16</code> \u4F4D\u6570\u636E\uFF0C\u8868\u793A\u957F\u5EA6\u4E3A [126, 65535]</li><li>\u82E5\u4E3A 127\uFF0C\u9700\u8981\u8BFB\u53D6\u540E <code>64</code> \u4F4D\u6570\u636E\uFF0C\u4E3A\u5176\u5B9E\u9645\u957F\u5EA6\uFF0C\u6570\u636E\u7EA7\u522B\u80FD\u591F\u8FBE\u5230 TB \u7EA7\u522B</li></ul></li></ul><h3 id="payload-data" tabindex="-1"><a class="header-anchor" href="#payload-data" aria-hidden="true">#</a> payload data</h3><ul><li>\u771F\u6B63\u4F20\u8F93\u7684\u6570\u636E\u5185\u5BB9\uFF0C\u6839\u636E payload \u957F\u5EA6\u622A\u53D6\u6307\u5B9A\u957F\u5EA6</li></ul><hr><h2 id="_3-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_3-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 3. \u5E94\u7528\u573A\u666F</h2><ul><li>\u5168\u53CC\u5DE5</li><li>\u9002\u7528\u4E8E Server &amp; Client \u9891\u7E41\u4EA4\u4E92 \u7684\u573A\u666F <ul><li>\u7F51\u9875\u6E38\u620F\u3001\u804A\u5929\u5BA4\u3001\u6D88\u606F\u901A\u77E5\u7B49</li></ul></li></ul>',13);function C(f,S){const l=s("Mermaid"),i=s("Tabs");return p(),u("div",null,[g,m,t(l,{id:"mermaid-1a962850",code:"sequenceDiagram%0A%20%20%20%20participant%20C%20as%20Client%0A%20%20%20%20participant%20S%20as%20Server%0A%20%20%20%20Note%20left%20of%20C%3A%20Closed%0A%20%20%20%20Note%20right%20of%20S%3A%20Listen%0A%20%20%20%20C%20-%3E%3E%2B%20S%3A%20SYN%20%3D%201%2C%20seq%20%3D%20x%0A%20%20%20%20Note%20left%20of%20C%3A%20Syn_sent%0A%20%20%20%20Note%20right%20of%20S%3A%20Syn_rcvd%0A%20%20%20%20S%20-%3E%3E-%20C%3A%20SYN%20%3D%201%2C%20ACK%20%3D%201%2C%20seq%20%3D%20y%2C%20ack%20%3D%20x%20%2B%201%20%0A%20%20%20%20Note%20left%20of%20C%3A%20Established%0A%20%20%20%20C%20-%3E%3E%20S%3A%20ACK%20%3D%201%2C%20seq%20%3D%20x%20%2B%201%2C%20ack%20%3D%20y%20%2B%201%0A%20%20%20%20Note%20right%20of%20S%3A%20Established%0A%20%20%20%20C%20-%3E%3E%2B%20S%3A%20Upgrade%3A%20websocket%0A%20%20%20%20Note%20right%20of%20S%3A%20websocket%0A%20%20%20%20S%20-%3E%3E-%20C%3A%20101%20Switching%20Protocols%20Upgrade%3A%20websocket%0A%20%20%20%20Note%20left%20of%20C%3A%20websocket%0A%20%20%20%20S%20-%3E%3E%20C%3A%20message%0A%20%20%20%20S%20-%3E%3E%20C%3A%20message%20...%0A"}),_,t(i,{data:[{title:"request"},{title:"response"}],"tab-id":"code10"},{tab0:n(({title:r,value:c,isActive:d})=>[A]),tab1:n(({title:r,value:c,isActive:d})=>[w]),_:1}),v])}var E=h(k,[["render",C],["__file","websocket.html.vue"]]);export{E as default};
